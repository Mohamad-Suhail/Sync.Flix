/* RESET */
* { box-sizing: border-box; margin:0; padding:0; font-family:'Poppins',sans-serif; }

/* BASE */
:root{
  --bg-dark:#0b0c10;
  --panel-dark:rgba(0,0,0,0.85);
  --glass-light:rgba(255,255,255,0.62);
  --accent:#E50914;
  --muted:rgba(255,255,255,0.12);
  --chat-width:340px;
}

html,body,#__next { height:100%; }
body {
  background:var(--bg-dark);
  color:#fff;
  -webkit-font-smoothing:antialiased;
  transition: background .25s ease, color .25s ease;
  overflow: hidden;
}

/* LAYOUT */
.room-container { height:100vh; width:100vw; position:relative; }

/* SIDE MENU */
.side-menu {
  position:fixed; left:-280px; top:0; width:280px; height:100vh;
  background:var(--panel-dark); padding:28px 20px; display:flex; flex-direction:column; justify-content:space-between;
  transition:left .28s cubic-bezier(.2,.9,.2,1), background .25s ease; z-index:60;
  backdrop-filter: blur(8px);
}
.side-menu.open { left:0; }

/* user row */
.user-row { display:flex; align-items:center; gap:12px; margin-bottom:18px; }
.user-avatar{
  width:52px; height:52px; border-radius:50%; background:var(--accent); display:flex; align-items:center; justify-content:center; font-weight:700;
  color:#fff; font-size:18px;
}
.side-menu h2 { font-size:1.25rem; margin:0; }

/* appearance section placed under username with spacing */
.appearance-section { margin-top:18px; display:flex; flex-direction:column; gap:8px; }
.appearance-label { font-size:0.9rem; opacity:.85; color:inherit; }

/* iOS style toggle */
.toggle-switch { width:55px; height:28px; background:#666; border-radius:999px; position:relative; cursor:pointer; transition:background .25s; }
.toggle-switch .thumb { position:absolute; width:24px; height:24px; left:2px; top:2px; background:#fff; border-radius:50%; transition:left .25s; }
.toggle-switch.active { background: #bdbdbd; }
.toggle-switch.active .thumb { left:29px; }

/* menu bottom version text transparent */
.menu-version { opacity:.18; font-size:0.85rem; text-align:center; padding-bottom:6px; }

/* TOP BAR */
.top-bar { height:64px; display:flex; align-items:center; justify-content:space-between; padding:0 20px; background:rgba(0,0,0,0.35); z-index:10; position:relative; }
.menu-btn { background:none; border:none; color:inherit; font-size:22px; cursor:pointer; }
.logo { color:var(--accent); font-size:1.3rem; margin:0; }
.top-right { display:flex; align-items:center; gap:10px; }
.room-code { opacity:.75; font-size:.95rem; margin-right:6px; }
.icon-btn { background:transparent; border:none; color:inherit; cursor:pointer; font-size:18px; padding:8px; border-radius:8px; transition:background .15s; }
.icon-btn:hover { background:rgba(255,255,255,0.03); }

/* MAIN */
.main-content { display:flex; gap:16px; padding:18px; height:calc(100vh - 64px - 72px); /* subtract top & search */ }

/* MEDIA PANEL */
.media-panel { flex:1; background: rgba(255,255,255,0.04); border-radius:14px; padding:14px; display:flex; flex-direction:column; justify-content:space-between; transition:background .2s; }
.media-container{ border-radius:10px; background: rgba(0,0,0,0.25); min-height:340px; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.media-container .placeholder { opacity:.6; }

/* CONTROLS - modern look */
.media-controls { margin-top:14px; display:flex; gap:10px; justify-content:center; align-items:center; }
.ctrl-btn {
  border:none; padding:10px 14px; border-radius:12px; cursor:pointer; font-size:16px; background:rgba(255,255,255,0.06); color:inherit;
  transition: transform .12s ease, background .12s;
}
.ctrl-btn.primary { background:var(--accent); color:#fff; box-shadow: 0 6px 18px rgba(233,9,20,0.18); }
.ctrl-btn:hover { transform:translateY(-3px); }

/* CHAT PANEL */
.chat-panel{ width:var(--chat-width); background: rgba(255,255,255,0.03); border-radius:12px; display:flex; flex-direction:column; overflow:hidden; transition:background .2s, border .2s; }
.chat-messages{ padding:14px; overflow-y:auto; display:flex; flex-direction:column; gap:8px; }

/* message bubble basic */
.msg { max-width:82%; padding:8px 12px; border-radius:12px; background: rgba(255,255,255,0.06); color:inherit; font-size:0.95rem; line-height:1.2; }
.msg.me { align-self:flex-end; background: linear-gradient(90deg,#E50914,#ff6b6b); color:#fff; }
.msg .meta { font-size:0.75rem; opacity:.7; margin-bottom:6px; }

/* EMOJIS */
.emoji-bar{ display:flex; justify-content:space-around; padding:8px 12px; background:transparent; gap:8px; }
.emoji-btn{ background:#1f1f1f; border:none; padding:8px 10px; border-radius:10px; cursor:pointer; font-size:18px; transition:transform .12s; }
.emoji-btn:hover{ transform:scale(1.05); }

/* floating emoji bubble (in DOM appended) */
.floating-emoji{ position:fixed; font-size:36px; pointer-events:none; transform:translateY(0); animation: floatUp 1400ms ease-out forwards; z-index:120; }

/* chat input area */
.chat-input{ display:flex; gap:8px; padding:12px; border-top:1px solid rgba(255,255,255,0.03); background:linear-gradient(0deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01)); }
.chat-input input{ flex:1; padding:10px 12px; border-radius:10px; border:none; background: rgba(0,0,0,0.08); color:inherit; }
.send-btn{ background:var(--accent); border:none; color:#fff; padding:10px 12px; border-radius:10px; cursor:pointer; box-shadow: 0 6px 14px rgba(233,9,20,0.18); }

/* SEARCH BAR bottom */
.search-bar{ position:fixed; left:0; right:0; bottom:18px; display:flex; gap:10px; padding:12px 20px; justify-content:center; align-items:center; z-index:50; }
.search-bar input{ width:min(900px,60%); padding:12px 14px; border-radius:12px; border:none; background: rgba(255,255,255,0.06); color:inherit; }
.search-btn{ padding:10px 14px; border-radius:10px; border:none; background:rgba(255,255,255,0.06); cursor:pointer; }

/* LIGHT THEME - glass panel B */
body.light{
  background: #f5f5f5; color:#111;
}
body.light .side-menu { background: var(--glass-light); color:#111; }
body.light .media-panel { background: rgba(255,255,255,0.9); border:1px solid rgba(0,0,0,0.06); color:#111; }
body.light .chat-panel { background: rgba(255,255,255,0.98); border:1px solid rgba(0,0,0,0.06); color:#111; box-shadow:0 8px 30px rgba(0,0,0,0.05); }
body.light .search-bar input { background: rgba(255,255,255,0.95); color:#111; border:1px solid rgba(0,0,0,0.06); }

/* Floating animation */
@keyframes floatUp {
  0% { transform: translateY(0) scale(1); opacity:1; }
  70% { transform: translateY(-90px) scale(1.1); opacity:0.85; }
  100% { transform: translateY(-180px) scale(0.95); opacity:0; }
}

/* small responsiveness */
@media (max-width:980px){
  .main-content{ flex-direction:column; height:calc(100vh - 64px - 120px); padding:10px; }
  .chat-panel{ width:100%; order:2; }
  .media-panel{ order:1; width:100%; }
  .search-bar input{ width:70%; }
}
/* ===== MOBILE FIXES ===== */
@media (max-width: 768px) {

  /* Stack content vertically */
  .main-content {
    flex-direction: column;
    height: auto;
    padding: 10px;
  }

  /* Media panel smaller on phone */
  .media-container iframe,
  .media-container video {
    height: 200px !important;
  }

  .media-panel {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
  }

  /* Reduce space between video & buttons */
  .media-controls {
    margin-top: 8px;
  }

  /* Chat panel full width */
  .chat-panel {
    width: 100%;
    height: 330px;
  }

  /* Chat messages scroll area */
  .chat-messages {
    height: 230px;
  }

  /* Search bar stays at bottom always */
  .search-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 10px;
    background: rgba(0,0,0,0.75);
  }

  /* Search bar input width */
  .search-bar input {
    width: 70%;
  }

  /* Avoid overlap with search bar */
  body {
    padding-bottom: 70px;
  }
}
